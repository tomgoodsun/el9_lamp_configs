## PHPのセットアップ

### Remi RepoのPHPのインストール設定ウィザード

https://rpms.remirepo.net/wizard/

PHPのバージョンを固定してインストールするモードと、複数のバージョンをインストールするバージョンのインストール方法が異なります。
上記リンクから条件を設定してインストールに必要にコマンドを取得します。
今回は以下の設定で進めます。

|Item|Value|
|:---|:---|
|Operating system|EL9|
|Wanted PHP version|8.4.3 (active support until November 2026)|
|Type of installation|Default / Single version (simplest way)|
|Architecture|x86_64|

まずは取得したコマンドをすべて実行します。
以下は例です。
```
[root@alma9 ~]# dnf config-manager --set-enabled crb
[root@alma9 ~]# dnf install https://dl.fedoraproject.org/pub/epel/epel-release-latest-9.noarch.rpm
[root@alma9 ~]# dnf install https://rpms.remirepo.net/enterprise/remi-release-9.rpm

[root@alma9 ~]# dnf module switch-to php:remi-8.4
[root@alma9 ~]# dnf module install php:remi-8.4
[root@alma9 ~]# dnf install php-xxx

[root@alma9 ~]# dnf --enablerepo=remi-modular-test install php-xxx

[root@alma9 ~]# php --version
[root@alma9 ~]# php --modules



 cp /etc/opt/remi/php73/php.ini /etc/opt/remi/php73/php.ini.orig
```


### PHP 7.3のセットアップ

設定を書き換える前にオリジナルをバックアップ。

```bash
[root@alma9 ~]# cp /etc/opt/remi/php73/php.ini /etc/opt/remi/php73/php.ini.orig
```

PHPの設定は以下を参考にする。
- [config/etc/opt/remi/php73/php.ini](config/etc/opt/remi/php73/php.ini)

```bash
[root@alma9 ~]# wget https://raw.githubusercontent.com/tomgoodsun/el9_lamp_configs/master/config/etc/opt/remi/php73/php.ini -O /etc/opt/remi/php73/php.ini
```

remiレポジトリでインストールするとphpコマンドではなくphp73コマンドとして認識するので、phpコマンドで認識するように変更する。

```bash
[root@alma9 ~]# which php73
/usr/bin/php73
[root@alma9 ~]# cd /usr/bin
[root@alma9 bin]# ln -s php73 php
```

### PHP 7.4のセットアップ

設定を書き換える前にオリジナルをバックアップ。

```bash
[root@alma9 ~]# cp /etc/opt/remi/php74/php.ini /etc/opt/remi/php74/php.ini.orig
```

PHPの設定は以下を参考にする。
- [config/etc/opt/remi/php74/php.ini](config/etc/opt/remi/php74/php.ini)

```bash
[root@alma9 ~]# wget https://raw.githubusercontent.com/tomgoodsun/el9_lamp_configs/master/config/etc/opt/remi/php74/php.ini -O /etc/opt/remi/php74/php.ini
```
remiレポジトリでインストールするとphpコマンドではなくphp74コマンドとして認識するので、phpコマンドで認識するように変更する。

```bash
[root@alma9 ~]# which php74
/usr/bin/php74
[root@alma9 ~]# cd /usr/bin
[root@alma9 bin]# ln -s php74 php
```
